# Vercel Deployment Guide

## Prerequisites
1. Vercel account (sign up at https://vercel.com)
2. Neon database with `users` table created

## Step 1: Create Users Table in Neon

Run this SQL in your Neon database console:

```sql
CREATE TABLE IF NOT EXISTS users (
  id SERIAL PRIMARY KEY,
  email VARCHAR(255) UNIQUE NOT NULL,
  password_hash VARCHAR(255) NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

CREATE INDEX IF NOT EXISTS idx_users_email ON users(email);
```

## Step 2: Commit and Push Your Code

```bash
git add .
git commit -m "feat: Migrate from Netlify to Vercel

- Replace Netlify Identity with JWT auth
- Replace Netlify Blobs with Vercel Blob
- Create API routes for auth and file upload
- Update client-side auth system"
git push origin main
```

## Step 3: Deploy to Vercel

### Option A: Using Vercel Dashboard (Recommended)

1. Go to https://vercel.com/new
2. Import your GitHub repository
3. Vercel will auto-detect it's a Vite project
4. Add environment variables:
   - `VITE_NEON_DATABASE_URL`: Your Neon database URL
   - `JWT_SECRET`: Generate a random string (use https://randomkeygen.com/)
5. Click "Deploy"

### Option B: Using Vercel CLI

```bash
# Install Vercel CLI
npm i -g vercel

# Login
vercel login

# Deploy
vercel

# Set environment variables
vercel env add VITE_NEON_DATABASE_URL
vercel env add JWT_SECRET

# Deploy to production
vercel --prod
```

## Step 4: Enable Vercel Blob Storage

1. Go to your project dashboard on Vercel
2. Click on "Storage" tab
3. Click "Create Database" â†’ "Blob"
4. This will automatically add `BLOB_READ_WRITE_TOKEN` to your environment

## Step 5: Test Your Site

1. Visit your deployed URL
2. Test signup/login
3. Test adding a card with an image

## Troubleshooting

### Login/Signup not working
- Check that `VITE_NEON_DATABASE_URL` is set correctly
- Check that `JWT_SECRET` is set
- Check Vercel function logs for errors

### Image upload not working
- Make sure Vercel Blob is enabled
- Check that `BLOB_READ_WRITE_TOKEN` env var exists
- Check API function logs

### "Module not found" errors
- Make sure all dependencies are in `package.json`
- Try `npm install` locally and commit `package-lock.json`

## Environment Variables Summary

| Variable | Where to get it | Required |
|----------|----------------|----------|
| `VITE_NEON_DATABASE_URL` | Your Neon dashboard | Yes |
| `JWT_SECRET` | Generate random string | Yes |
| `BLOB_READ_WRITE_TOKEN` | Auto-generated by Vercel | Yes |
